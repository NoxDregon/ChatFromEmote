(function(t){function e(e){for(var n,r,o=e[0],i=e[1],u=e[2],_=0,f=[];_<o.length;_++)r=o[_],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(f.length)f.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,o=1;o<a.length;o++){var i=a[o];0!==s[i]&&(n=!1)}n&&(c.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},c=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=i;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"569e":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-main-wrapper")],1)},c=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-main-wrapper"},[a("v-header"),a("router-view"),a("v-bottom-nav")],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-header"},[t.isCoreRoute?t._e():a("div",{staticClass:"v-header__back",on:{click:t.routeBack}},[a("i",{staticClass:"material-icons"},[t._v("keyboard_arrow_left")]),a("span",[t._v("Back")])]),t.isCoreRoute?t._e():a("div",{staticClass:"v-header__user-info"},[a("span",[t._v(t._s(t.currentUserChat.name))])]),a("div",{staticClass:"right-side"})])},u=[],l=a("5530"),_=a("2f62"),f={name:"v-header",computed:Object(l["a"])(Object(l["a"])({},Object(_["c"])(["currentUserChat"])),{},{isCoreRoute:function(){return"/"===this.$route.path}}),methods:{routeBack:function(){this.$router.go(-1)}}},d=f,p=a("2877"),h=Object(p["a"])(d,i,u,!1,null,null,null),m=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-bottom-nav"},[a("router-link",{attrs:{to:{name:"contacts"}}},[a("i",{staticClass:"material-icons"},[t._v("person_pin")])]),a("router-link",{attrs:{to:{name:"chats"}}},[a("i",{staticClass:"material-icons"},[t._v("chat")])]),a("router-link",{attrs:{to:{name:"contacts"}}},[a("i",{staticClass:"material-icons"},[t._v("settings")])]),a("router-link",{attrs:{to:{name:"contacts"}}},[a("i",{staticClass:"material-icons"},[t._v("call")])]),a("router-link",{attrs:{to:{name:"contacts"}}},[a("i",{staticClass:"material-icons"},[t._v("home")])])],1)},C=[],O={name:"v-bottom-nav",props:{},data:function(){return{}}},b=O,T=Object(p["a"])(b,v,C,!1,null,null,null),E=T.exports,S={name:"v-main-wrapper",components:{vHeader:m,vBottomNav:E},props:{},data:function(){return{}},computed:{}},j=S,g=Object(p["a"])(j,r,o,!1,null,null,null),y=g.exports,x={name:"App",components:{vMainWrapper:y}},k=x,H=Object(p["a"])(k,s,c,!1,null,null,null),A=H.exports,w=a("bc3a"),R=a.n(w);n["a"].use(_["a"]);var U=new _["a"].Store({state:{contacts:[],chats:[],currentUserChat:{}},getters:{},mutations:{SET_CONTACTS_TO_STORE:function(t,e){t.contacts=e},SET_CHATS_TO_STORE:function(t,e){t.chats=e},SET_USER_TO_HEAD:function(t,e){t.currentUserChat=e||""}},actions:{FETCH_CONTACTS:function(t){var e=t.commit;return R.a.get("http://localhost:3000/contacts").then((function(t){e("SET_CONTACTS_TO_STORE",t.data)}))},FETCH_CHATS:function(t){var e=t.commit;return R.a.get("http://localhost:3000/chats").then((function(t){e("SET_CHATS_TO_STORE",t.data)}))},SET_USER_TO_HEADER:function(t,e){var a=t.commit;a("SET_USER_TO_HEAD",e)},SEND_MSG_TO_CHAT:function(t,e){t.commit;var a=e.userId,n=e.user;return R.a.put("http://localhost:3000/chats/"+a,n).then((function(t){return t}))}}}),$=U,D=a("8c4f"),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-contact-list"},t._l(t.contacts,(function(e){return a("v-contact-user",{key:e.id,attrs:{contact_data:e},on:{"to-contact-info":function(a){return t.toContactInfo(e)}}})})),1)},N=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-contact-user",on:{click:t.toContactInfo}},[a("div",{staticClass:"user__avatar"}),a("div",{staticClass:"user__name"},[a("span",[t._v(t._s(t.contact_data.name))])]),a("div",{staticClass:"user__status",class:{online:"online"===t.contact_data.status,offline:"offline"===t.contact_data.status}})])},P=[],V={name:"v-contact-user",props:{contact_data:{type:Object,default:function(){}}},data:function(){return{}},methods:{toContactInfo:function(){this.$emit("to-contact-info")}}},I=V,q=Object(p["a"])(I,F,P,!1,null,null,null),B=q.exports,G={name:"v-contact-list",components:{vContactUser:B},computed:Object(l["a"])({},Object(_["c"])(["contacts"])),methods:Object(l["a"])(Object(l["a"])({},Object(_["b"])(["FETCH_CONTACTS","SET_USER_TO_HEADER"])),{},{toContactInfo:function(t){this.$router.push({name:"contact",query:{id:t.id}}),this.SET_USER_TO_HEADER(t)}}),mounted:function(){this.FETCH_CONTACTS()}},J=G,L=Object(p["a"])(J,M,N,!1,null,null,null),W=L.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-contact-user-info"},[a("div",{staticClass:"info__avatar"}),a("div",{staticClass:"info__content"},[a("div",{staticClass:"info__name"},[a("span",[t._v(t._s(t.contact_info.phone))])]),a("div",{staticClass:"info__tools"},[a("button",{staticClass:"start-call"},[t._v("Call")]),a("button",{staticClass:"start-chat",on:{click:t.checkChats}},[t._v(" Start chat ")])])])])},K=[],Q=(a("7db0"),a("d81d"),{name:"v-contact-user-info",data:function(){return{contact_info:{}}},computed:Object(l["a"])({},Object(_["c"])(["chats","contacts"])),methods:Object(l["a"])(Object(l["a"])({},Object(_["b"])(["FETCH_CHATS","SET_USER_TO_HEADER"])),{},{toUserChat:function(){var t=this;this.chats.map((function(e){e.id===t.contact_info.id&&t.$router.push({name:"user",params:{messages:e.chat,user:e},query:{id:t.contact_info.id}})}))},checkChats:function(){var t=this;this.chats.length?this.toUserChat():this.FETCH_CHATS().then((function(){t.toUserChat()}))}}),mounted:function(){var t=this;this.contacts.find((function(e){e.id===t.$route.query.id&&(t.contact_info=e)}))}}),X=Q,Y=Object(p["a"])(X,z,K,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"users-list"},t._l(t.chats,(function(t){return a("v-user",{key:t.id,attrs:{user_data:t}})})),1)},et=[],at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-user",on:{click:t.toUserChat}},[a("div",{staticClass:"v-user__avatar"}),a("div",{staticClass:"v-user__info"},[a("p",{staticClass:"info__name"},[t._v(t._s(t.user_data.name))]),a("p",{staticClass:"info__last-message"},[t._v(t._s(t.user_data.chat[t.user_data.chat.length-1].text))])]),a("div",{staticClass:"v-user__time"},[t._v(t._s(t.user_data.chat[t.user_data.chat.length-1].time))])])},nt=[],st={name:"v-user-list-item",props:{user_data:{type:Object,default:function(){}}},data:function(){return{}},methods:Object(l["a"])(Object(l["a"])({},Object(_["b"])(["SET_USER_TO_HEADER"])),{},{toUserChat:function(){this.SET_USER_TO_HEADER(this.user_data),this.$router.push({name:"user",params:{messages:this.user_data.chat,user:this.user_data},query:{id:this.user_data.id}})}})},ct=st,rt=Object(p["a"])(ct,at,nt,!1,null,null,null),ot=rt.exports,it={name:"users-list",components:{vUser:ot},props:{},data:function(){return{}},computed:Object(l["a"])({},Object(_["c"])(["chats"])),methods:Object(l["a"])({},Object(_["b"])(["FETCH_CHATS"])),mounted:function(){this.FETCH_CHATS()}},ut=it,lt=Object(p["a"])(ut,tt,et,!1,null,null,null),_t=lt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-user-chat"},[t._l(t.messages,(function(t){return a("v-message",{key:t.id,attrs:{message:t}})})),a("div",{staticClass:"input__field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.textValue,expression:"textValue"}],staticClass:"v-user-chat__textfield",attrs:{type:"text"},domProps:{value:t.textValue},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)},input:function(e){e.target.composing||(t.textValue=e.target.value)}}}),a("i",{staticClass:"material-icons",on:{click:t.sendMessage}},[t._v(" send ")])])],2)},dt=[],pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-message",class:t.className},[a("div",{staticClass:"v-message__content"},[a("p",[t._v(t._s(t.message.text))]),a("p",{staticClass:"content__time"},[t._v(t._s(t.message.time))])])])},ht=[],mt={name:"v-message",props:{message:{type:Object,default:function(){}}},data:function(){return{}},computed:{className:function(){return{chat__own:"own"===this.message.type,chat__others:"others"===this.message.type}}}},vt=mt,Ct=Object(p["a"])(vt,pt,ht,!1,null,null,null),Ot=Ct.exports,bt={name:"v-user-chat",components:{vMessage:Ot},props:{user:{type:Object,default:function(){}},messages:{type:Array,default:function(){return[]}}},data:function(){return{textValue:""}},methods:Object(l["a"])(Object(l["a"])({},Object(_["b"])(["SEND_MSG_TO_CHAT"])),{},{sendMessage:function(){var t=this,e=Object(l["a"])({},this.user),a={id:this.messages.length+1,time:(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"numeric",minute:"numeric"}),text:this.textValue,type:"own"};e.chat.push(a),this.SEND_MSG_TO_CHAT({userId:e.id,chat:e}).then((function(){t.textValue=""}))}})},Tt=bt,Et=Object(p["a"])(Tt,ft,dt,!1,null,null,null),St=Et.exports;n["a"].use(D["a"]);var jt=new D["a"]({routes:[{path:"/",name:"contacts",component:W},{path:"/contact",name:"contact",component:Z,props:!0},{path:"/chats",name:"chats",component:_t},{path:"/user",name:"user",component:St,props:!0}]}),gt=jt;a("d1e78"),a("569e");n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(A)},store:$,router:gt}).$mount("#app")}});
//# sourceMappingURL=app.b9bac283.js.map